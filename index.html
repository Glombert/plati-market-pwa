<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1a1f2b">
    <title>Plati Market</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="images/icon-192x192.png">
</head>
<body>
    <div id="app">
        <!-- Экран загрузки -->
        <div id="splash-screen" class="screen active">
            <div class="splash-container">
                <img src="images/logo.png" alt="Plati Market" class="logo">
                <div class="loader"></div>
            </div>
        </div>

        <!-- Экран авторизации -->
        <div id="auth-screen" class="screen">
            <div class="auth-container">
                <img src="images/logo.png" alt="Plati Market" class="logo">
                <h2>Вход в аккаунт</h2>
                <form id="login-form">
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" placeholder="Введите email" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Пароль</label>
                        <input type="password" id="password" placeholder="Введите пароль" required>
                    </div>
                    <div class="form-group remember">
                        <input type="checkbox" id="remember" checked>
                        <label for="remember">Запомнить меня</label>
                    </div>
                    <button type="submit" class="btn btn-primary">Войти</button>
                </form>
                <div class="auth-links">
                    <a href="#" id="forgot-password">Забыли пароль?</a>
                </div>
            </div>
        </div>

        <!-- Главный экран -->
        <div id="main-screen" class="screen">
            <!-- Верхняя панель -->
            <header class="top-bar">
                <button id="menu-btn" class="icon-btn">
                    <span class="menu-icon"></span>
                </button>
                <div class="search-container">
                    <input type="text" id="search-input" placeholder="Поиск по товарам">
                    <button id="search-btn" class="icon-btn search-icon"></button>
                </div>
                <button id="cart-btn" class="icon-btn cart-icon">
                    <span class="badge" id="cart-badge">0</span>
                </button>
            </header>

            <!-- Боковое меню -->
            <div id="side-menu" class="side-menu">
                <div class="user-info">
                    <div class="user-avatar">
                        <span id="user-initial"></span>
                    </div>
                    <div class="user-details">
                        <span id="user-name">Пользователь</span>
                        <span id="user-email">user@example.com</span>
                    </div>
                </div>
                <nav class="menu-nav">
                    <ul>
                        <li data-screen="main-screen" class="active"><span class="menu-icon home-icon"></span>Главная</li>
                        <li data-screen="purchases-screen"><span class="menu-icon purchases-icon"></span>Мои покупки</li>
                        <li data-screen="favorites-screen"><span class="menu-icon favorites-icon"></span>Избранное</li>
                        <li data-screen="chat-list-screen"><span class="menu-icon chat-icon"></span>Чаты</li>
                        <li id="logout-btn"><span class="menu-icon logout-icon"></span>Выйти</li>
                    </ul>
                </nav>
            </div>
            <div id="menu-overlay"></div>

            <!-- Контент главного экрана -->
            <div class="content">
                <!-- Категории -->
                <div class="categories-container">
                    <h2>Категории</h2>
                    <div class="categories-scroll">
                        <div class="category-item" data-category="games">
                            <div class="category-icon games-icon"></div>
                            <span>Игры</span>
                        </div>
                        <div class="category-item" data-category="cards">
                            <div class="category-icon cards-icon"></div>
                            <span>Карты</span>
                        </div>
                        <div class="category-item" data-category="software">
                            <div class="category-icon software-icon"></div>
                            <span>ПО для ПК</span>
                        </div>
                        <div class="category-item" data-category="appstore">
                            <div class="category-icon appstore-icon"></div>
                            <span>iTunes & App Store</span>
                        </div>
                        <div class="category-item" data-category="accounts">
                            <div class="category-icon accounts-icon"></div>
                            <span>Игровые аккаунты</span>
                        </div>
                    </div>
                </div>

                <!-- Популярные товары -->
                <div class="products-section">
                    <div class="section-header">
                        <h2>Популярное</h2>
                        <a href="#" class="view-all">Все</a>
                    </div>
                    <div class="products-grid" id="popular-products">
                        <!-- Товары будут добавлены через JavaScript -->
                    </div>
                </div>

                <!-- Новинки -->
                <div class="products-section">
                    <div class="section-header">
                        <h2>Новинки</h2>
                        <a href="#" class="view-all">Все</a>
                    </div>
                    <div class="products-grid" id="new-products">
                        <!-- Товары будут добавлены через JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Нижняя навигация -->
            <nav class="bottom-nav">
                <div class="nav-item active" data-screen="main-screen">
                    <span class="nav-icon home-icon"></span>
                    <span class="nav-text">Главная</span>
                </div>
                <div class="nav-item" data-screen="search-screen">
                    <span class="nav-icon search-icon"></span>
                    <span class="nav-text">Поиск</span>
                </div>
                <div class="nav-item" data-screen="favorites-screen">
                    <span class="nav-icon favorites-icon"></span>
                    <span class="nav-text">Избранное</span>
                </div>
                <div class="nav-item" data-screen="purchases-screen">
                    <span class="nav-icon purchases-icon"></span>
                    <span class="nav-text">Покупки</span>
                </div>
                <div class="nav-item" data-screen="chat-list-screen">
                    <span class="nav-icon chat-icon"></span>
                    <span class="nav-text">Чаты</span>
                </div>
            </nav>
        </div>

        <!-- Экран товара -->
        <div id="product-screen" class="screen">
            <header class="top-bar">
                <button class="icon-btn back-btn" data-back="main-screen">
                    <span class="back-icon"></span>
                </button>
                <h2 class="screen-title">Товар</h2>
                <button class="icon-btn favorite-btn">
                    <span class="favorite-icon"></span>
                </button>
            </header>
            <div class="content product-content">
                <div class="product-image-container">
                    <img id="product-image" src="" alt="Товар">
                </div>
                <div class="product-info">
                    <h1 id="product-title"></h1>
                    <div class="product-meta">
                        <div class="product-rating">
                            <span class="rating-stars"></span>
                            <span id="product-rating-count"></span>
                        </div>
                        <div class="product-seller">
                            <span>Продавец: </span>
                            <a id="product-seller-name" href="#"></a>
                        </div>
                    </div>
                    <div class="product-price">
                        <span id="product-price"></span>
                        <span class="currency">руб.</span>
                    </div>
                    <div class="product-description">
                        <h3>Описание</h3>
                        <p id="product-description"></p>
                    </div>
                    <div class="product-actions">
                        <button class="btn btn-primary" id="buy-now-btn">Купить сейчас</button>
                        <button class="btn btn-secondary" id="chat-with-seller-btn">Чат с продавцом</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Экран чатов (список) -->
        <div id="chat-list-screen" class="screen">
            <header class="top-bar">
                <button class="icon-btn back-btn" data-back="main-screen">
                    <span class="back-icon"></span>
                </button>
                <h2 class="screen-title">Чаты</h2>
                <div></div> <!-- Пустой элемент для выравнивания -->
            </header>
            <div class="content">
                <div class="chat-list" id="chat-list">
                    <!-- Чаты будут добавлены через JavaScript -->
                </div>
            </div>
        </div>

        <!-- Экран чата с продавцом -->
        <div id="chat-screen" class="screen">
            <header class="top-bar">
                <button class="icon-btn back-btn" data-back="chat-list-screen">
                    <span class="back-icon"></span>
                </button>
                <div class="chat-header-info">
                    <h2 id="chat-seller-name"></h2>
                    <span id="chat-seller-status"></span>
                </div>
                <button class="icon-btn more-btn">
                    <span class="more-icon"></span>
                </button>
            </header>
            <div class="content chat-content">
                <div class="chat-messages" id="chat-messages">
                    <!-- Сообщения будут добавлены через JavaScript -->
                </div>
                <div class="chat-input-container">
                    <input type="text" id="chat-input" placeholder="Введите сообщение...">
                    <button id="send-message-btn" class="icon-btn send-icon"></button>
                </div>
            </div>
        </div>

        <!-- Экран покупок -->
        <div id="purchases-screen" class="screen">
            <header class="top-bar">
                <button class="icon-btn back-btn" data-back="main-screen">
                    <span class="back-icon"></span>
                </button>
                <h2 class="screen-title">Мои покупки</h2>
                <div></div> <!-- Пустой элемент для выравнивания -->
            </header>
            <div class="content">
                <div class="purchases-list" id="purchases-list">
                    <!-- Покупки будут добавлены через JavaScript -->
                </div>
            </div>
        </div>

        <!-- Экран избранного -->
        <div id="favorites-screen" class="screen">
            <header class="top-bar">
                <button class="icon-btn back-btn" data-back="main-screen">
                    <span class="back-icon"></span>
                </button>
                <h2 class="screen-title">Избранное</h2>
                <div></div> <!-- Пустой элемент для выравнивания -->
            </header>
            <div class="content">
                <div class="products-grid" id="favorites-products">
                    <!-- Избранные товары будут добавлены через JavaScript -->
                </div>
            </div>
        </div>

        <!-- Экран поиска -->
        <div id="search-screen" class="screen">
            <header class="top-bar">
                <button class="icon-btn back-btn" data-back="main-screen">
                    <span class="back-icon"></span>
                </button>
                <div class="search-container">
                    <input type="text" id="search-page-input" placeholder="Поиск по товарам">
                    <button id="search-page-btn" class="icon-btn search-icon"></button>
                </div>
                <button id="search-filter-btn" class="icon-btn filter-icon"></button>
            </header>
            <div class="content">
                <div class="search-filters">
                    <div class="filter-group">
                        <label>Категория</label>
                        <select id="category-filter">
                            <option value="">Все категории</option>
                            <option value="games">Игры</option>
                            <option value="cards">Карты</option>
                            <option value="software">ПО для ПК</option>
                            <option value="appstore">iTunes & App Store</option>
                            <option value="accounts">Игровые аккаунты</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Сортировка</label>
                        <select id="sort-filter">
                            <option value="relevance">По релевантности</option>
                            <option value="price_asc">По цене (возр.)</option>
                            <option value="price_desc">По цене (убыв.)</option>
                            <option value="rating">По рейтингу</option>
                        </select>
                    </div>
                </div>
                <div class="search-results" id="search-results">
                    <!-- Результаты поиска будут добавлены через JavaScript -->
                </div>
            </div>
        </div>

        <!-- Уведомления -->
        <div id="notification" class="notification">
            <span id="notification-message"></span>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/products.js"></script>
    <script src="js/chat.js"></script>
    <script>
        // Регистрация Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(error => {
                        console.log('ServiceWorker registration failed: ', error);
                    });
            });
        }
    </script>
</body>
</html>
